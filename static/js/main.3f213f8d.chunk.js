(this["webpackJsonpps-flux"]=this["webpackJsonpps-flux"]||[]).push([[0],{49:function(e,t,a){e.exports=a(65)},65:function(e,t,a){"use strict";a.r(t);a(50);var n=a(0),r=a.n(n),c=a(12),o=a(7);var l=function(){return r.a.createElement("div",{className:"jumbotron"},r.a.createElement("h1",null,"Pluralsight Admin"),r.a.createElement("p",null,"React, Flux, and React Router for ultra-fast responsive web apps. I hope..."),r.a.createElement(o.b,{to:"/about",className:"btn btn-primary"},"About"))},u=a(26),s=a(17),i=a(27),m=a(28),E=a(31),h=function(e){function t(){return Object(u.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"About"),r.a.createElement("p",null,"This app uses React."))}}]),t}(r.a.Component),d=a(14),b=a(40),p=new(a(41).Dispatcher),f={CREATE_COURSE:"CREATE_COURSE",UPDATE_COURSE:"UPDATE_COURSE",DELETE_COURSE:"DELETE_COURSE",LOAD_COURSES:"LOAD_COURSES"},g=[],C=new(function(e){function t(){return Object(u.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(s.a)(t,[{key:"addChangeListener",value:function(e){this.on("change",e)}},{key:"removeChangeListener",value:function(e){this.removeListener("change",e)}},{key:"emitChange",value:function(){this.emit("change")}},{key:"getCourses",value:function(){return g}},{key:"getCourseBySlug",value:function(e){return g.find((function(t){return t.slug===e}))}}]),t}(b.EventEmitter));p.register((function(e){switch(e.actionType){case f.CREATE_COURSE:g.push(e.course),C.emitChange();break;case f.UPDATE_COURSE:g=g.map((function(t){return t.id===e.course.id?e.course:t})),C.emitChange();break;case f.DELETE_COURSE:g=g.filter((function(t){return t.id!==parseInt(e.id,10)})),C.emitChange();break;case f.LOAD_COURSES:g=e.courses,C.emitChange()}}));var v=C;function O(e){return r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"\xa0"),r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Author ID"),r.a.createElement("th",null,"Category"))),r.a.createElement("tbody",null,e.courses.map((function(t){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-outline-danger",onClick:function(){return e.deleteCourse(t.id)}},"Delete")),r.a.createElement("td",null,r.a.createElement(o.b,{to:"/course/"+t.slug},t.title)),r.a.createElement("td",null,t.authorId),r.a.createElement("td",null,t.category))}))))}O.defaultProps={courses:[]};var y=O,S=a(29),j=a(36),R=a.n(j);function A(e){var t;return R.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.ok){a.next=2;break}return a.abrupt("return",e.json());case 2:if(400!==e.status){a.next=7;break}return a.next=5,R.a.awrap(e.text());case 5:throw t=a.sent,new Error(t);case 7:throw new Error("Network response was not ok.");case 8:case"end":return a.stop()}}))}function T(e){throw console.error("API call failed. "+e),e}var U=Object({NODE_ENV:"production",PUBLIC_URL:"/ubiquitous-octo-chainsaw"}).REACT_APP_API_URL+"/courses/";function L(e){return function(e){return fetch(U+(e.id||""),{method:e.id?"PUT":"POST",headers:{"content-type":"application/json"},body:JSON.stringify(Object(S.a)({},e,{authorId:parseInt(e.authorId,10)}))}).then(A).catch(T)}(e).then((function(t){p.dispatch({actionType:e.id?f.UPDATE_COURSE:f.CREATE_COURSE,course:t})}))}function k(){return fetch(U).then(A).catch(T).then((function(e){p.dispatch({actionType:f.LOAD_COURSES,courses:e})}))}function N(e){return(t=e,fetch(U+t,{method:"DELETE"}).then(A).catch(T)).then((function(){p.dispatch({actionType:f.DELETE_COURSE,id:e})}));var t}var _=a(86);var D=function(){var e=Object(n.useState)(v.getCourses()),t=Object(d.a)(e,2),a=t[0],c=t[1];function l(){c(v.getCourses())}return Object(n.useEffect)((function(){return v.addChangeListener(l),0===v.getCourses().length&&k(),function(){return v.removeChangeListener(l)}}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Courses"),r.a.createElement(_.a,{style:{padding:"20px 0",margin:"20px 0",backgroundColor:"#e9ecef"}},r.a.createElement(o.b,{className:"btn btn-primary",to:"/course",style:{margin:"20px"}},"Add course")),r.a.createElement(y,{courses:a,deleteCourse:N}))},I=a(19);var w=function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Page Not Found"),r.a.createElement("p",null,r.a.createElement(o.b,{to:"/"},"Back to Home")))},x=a(10);function P(e){var t="form-group";return e.error&&e.error.length>0&&(t+=" has-error"),r.a.createElement("div",{className:t},r.a.createElement("label",{htmlFor:e.id},e.label),r.a.createElement("div",{className:"field"},r.a.createElement("input",{id:e.id,type:"text",onChange:e.onChange,name:e.name,className:"form-control",value:e.value||""})),e.error&&r.a.createElement("div",{className:"alert alert-danger"},e.error))}P.defaultProps={error:""};var F=P;var B=function(e){return r.a.createElement("form",{onSubmit:e.onSubmit},r.a.createElement(F,{id:"title",label:"Title",onChange:e.onChange,name:"title",value:e.course.title,error:e.errors.title}),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"author"},"Author"),r.a.createElement("div",{className:"field"},r.a.createElement("select",{id:"author",name:"authorId",onChange:e.onChange,value:e.course.authorId,className:"form-control"},r.a.createElement("option",{value:""}),r.a.createElement("option",{value:"1"},"Cory House"),r.a.createElement("option",{value:"2"},"Scott Allen"))),e.errors.authorId&&r.a.createElement("div",{className:"alert alert-danger"},e.errors.authorId)),r.a.createElement(F,{id:"category",label:"Category",onChange:e.onChange,name:"category",value:e.course.category,error:e.errors.category}),r.a.createElement("input",{type:"submit",value:"Save",className:"btn btn-primary"}))},q=a(30),H=function(e){var t=Object(n.useState)({}),a=Object(d.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(v.getCourses()),u=Object(d.a)(l,2),s=u[0],i=u[1],m=Object(n.useState)({id:null,slug:"",title:"",authorId:null,category:""}),E=Object(d.a)(m,2),h=E[0],b=E[1];function p(){i(v.getCourses())}function f(){var e={};return h.title||(e.title="Title is required"),h.authorId||(e.authorId="Author ID is required"),h.category||(e.category="Category is required"),o(e),0===Object.keys(e).length}return Object(n.useEffect)((function(){v.addChangeListener(p);var t=e.match.params.slug;return 0===s.length?k():t&&b(v.getCourseBySlug(t)),function(){return v.removeChangeListener(p)}}),[s.length,e.match.params.slug]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Manage Course"),r.a.createElement(B,{errors:c,course:h,onChange:function(e){var t=e.target;b(Object(S.a)({},h,Object(x.a)({},t.name,t.value)))},onSubmit:function(t){t.preventDefault(),f&&L(h).then((function(){e.history.push("/courses"),q.b.success("Course saved.")}))}}))},J=a(84),M=a(85),V=a(87),z=a(42),G=a.n(z),K=a(43),Q=a.n(K),W=a(44),X=a.n(W),Y=Object(J.a)({root:{width:500}});function Z(){var e=Y(),t=r.a.useState(0),a=Object(d.a)(t,2),n=a[0],c=a[1],l={color:"orange"};return r.a.createElement(M.a,{value:n,onChange:function(e,t){c(t)},showLabels:!0,className:e.root,style:{display:"block"}},r.a.createElement(V.a,{label:"Home",icon:r.a.createElement(G.a,null),component:o.c,to:"/",activeStyle:l,exact:!0,style:{marginLeft:"-20px"}}),r.a.createElement(V.a,{label:"About",icon:r.a.createElement(Q.a,null),component:o.c,to:"/about",activeStyle:l,style:{marginLeft:"-20px"}}),r.a.createElement(V.a,{label:"Courses",icon:r.a.createElement(X.a,null),component:o.c,to:"/courses",activeStyle:l,style:{marginLeft:"-20px"}}))}a(64);var $=function(){return r.a.createElement("div",{className:"container-fluid"},r.a.createElement(q.a,{autoClose:3e3,hideProgressBar:!0}),r.a.createElement(Z,null),r.a.createElement(I.d,null,r.a.createElement(I.b,{path:"/",exact:!0,component:l}),r.a.createElement(I.b,{path:"/courses",component:D}),r.a.createElement(I.b,{path:"/course/:slug",component:H}),r.a.createElement(I.b,{path:"/course",component:H}),r.a.createElement(I.b,{path:"/about",component:h}),r.a.createElement(I.a,{from:"/about-page",to:"about"}),r.a.createElement(I.b,{component:w})))};Object(c.render)(r.a.createElement(o.a,null,r.a.createElement($,null)),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.3f213f8d.chunk.js.map